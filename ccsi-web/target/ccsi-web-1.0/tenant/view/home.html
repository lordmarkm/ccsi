<div ng-if="!tenants.length">
  It looks like you don't have any registered tenants. <a ui-sref="tenant_create">Create one now</a>
</div>

<div ng-if="tenant">
  <div class="row">
    <!-- Dropdown for available tenants -->
    <div class="col-sm-6">
      <select ng-model="tenant"
        ng-options="tenant as tenant.name for tenant in tenants track by tenant.keyword"
        ng-change="loadTenant(tenant)"
        class="form-control">
      </select>
    </div>
  </div>
  <div class="row" style="margin-top: 5px;">
    <div class="col-sm-6">
      <a ui-sref="tenant_create({tenantIndex: tenantIndex})">Create new</a>
    </div>
  </div>

  <div class="panel panel-default" style="margin-top:10px;">
    <div class="panel-heading">Tenant Info</div>
    <div class="panel-body">
      <dl class="dl-horizontal">
        <dt>Name
        <dd>{{tenant.name}}
        <dt>Keyword
        <dd>{{tenant.keyword}}
        <dt>Templates
        <dd><a ui-sref="tenant.templates({tenantId: tenant.id, tenantIndex: tenantIndex})">Edit templates</a>
        <dt>Transactions
        <dd><a ui-sref="tenant.transactions({tenantId: tenant.id, tenantIndex: tenantIndex})">View transactions</a>
      </dl>
    </div>
    <div class="panel-heading">Tenant records</div>
    <div class="panel-body">
      <form ng-submit="saveRecord()" class="form form-inline">
        <div class="form-group">
          <label class="sr-only" for="status">Status</label>
          <select ng-model="record.status" required
            ng-options="template as template.status for template in statuses track by template.status" id="status" class="form-control"></select>
        </div>
        <div class="form-group">
          <label class="sr-only" for="customerName">Customer name</label>
          <input type="text" ng-model="record.customerName" class="form-control" id="customerName" placeholder="Customer name">
        </div>
        <div class="form-group">
          <label class="sr-only" for="transactionType">Transaction type</label>
          <input type="text" ng-model="record.transactionType" class="form-control" id="transactionType" placeholder="Transaction type">
        </div>
        <button type="submit" ng-disabled="!record.status" class="btn btn-primary">
          Create new record
        </button>
        <button ng-click="clearRecord()" class="btn btn-default">Clear</button>
      </form>
      <table ng-table="tableParams" show-filter="true" class="table table-striped">
        <thead>
          <tr>
            <th style="text-align: left;">Tracking code
            <th style="text-align: left;">Customer name
            <th style="text-align: left;">Transaction type
            <th style="text-align: left;">Last updated
            <th style="text-align: left;">Transactions
            <th style="text-align: left;">Status
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="record in $data">
            <td>{{record.trackingNo}}
            <td>{{record.customerName}}
            <td>{{record.transactionType}}
            <td>{{record.lastUpdated|date: 'MMM-dd-yyyy hh:mm'}}
            <td><a ui-sref="tenant.record_txns({tenantId: tenant.id, tenantRecordId: record.id, tenantIndex: tenantIndex})">View</a>
            <td>
              <select ng-model="record.status" 
                ng-options="template as template.status for template in statuses track by template.status"
                ng-change="saveRecord(record)"
                id="status" class="form-control"></select>
            </td>
          </tr>
          <tr ng-if="!totalRecords">
            <td colspan="4">No records found</td>
          </tr>
        </tbody>
      </table>
    </div>
    </div>
  </div>
</div>